//colResizable - by Alvaro Prieto Lauroba - MIT & GPL
(function(d){var G=d(document),A="<style>",z="}</style>",g="position",q=":absolute;",v="!important;",y="padding-",l="append",e="left",D=":0px"+v,t="cursor:e-resize",L=d("head")[l](A+".CRZ{table-layout:fixed}.CRZ td,.CRZ th{"+y+e+D+y+"right"+D+"overflow:hidden}.CRC{height:0px;"+g+":relative}.CRG{margin-left:-5px;"+g+q+" z-index:5}.CRG .CRZ{"+g+q+"background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;"+t+";height:100%}.CRL{"+g+q+"width:1px}.CRD{border-left:1px dotted black"+z),n=null,a=n,f=[],J=0,p="id",o="px",c="CRZ",H=parseInt,r=Math,I=d.browser.msie,h=false,w="mousemove.",x="mouseup.",C="tr:first ",b="width",u="border-",B="table",E='<div class="CR',i="removeClass",j="addClass",k="attr",s="currentTarget";function O(g,l){var a=d(g),h=a[k](p)||c+J++,i="currentStyle";if(l.disable)return R(a);if(!a.is(B)||f[h])return;a[j](c)[k](p,h).before(E+'C"/>');a.o=l;a.g=[];a.c=[];a.w=a[b]();a.d=a.prev();a.s=H(I?g.cellSpacing||g[i].borderSpacing:a.css(u+"spacing"))||2;a.b=H(I?g.border||g[i].borderLeftWidth:a.css(u+e+"-"+b))||1;f[h]=a;K(a)}function R(a){var b=a[k](p),a=f[b];if(!a||!a.is(B))return;a[i](c).d.remove();delete f[b]}function K(a){var e=a.find(C+"th"),f="removeAttr";if(!e.length)e=a.find(C+"td");a.l=e.length;e.each(function(h){var g=d(this),e=d(a.d[l](E+'G"></div>')[0].lastChild);e.t=a;e.i=h;e.c=g;g.w=g[b]();a.g.push(e);a.c.push(g);g[b](g.w)[f](b);if(h<a.l-1)e.mousedown(Q)[l](a.o.gripInnerHtml)[l]('<div class="'+c+'"></div>');else e[j]("CRL")[i]("CRG");e.data(c,{i:h,t:a[k](p)})});m(a);a.find("tr:not(:first)").find("td,th").each(function(){d(this)[f](b)})}function m(a){a.d[b](a.w);for(var d,c=0;c<a.l;c++){d=a.c[c];a.g[c].css({left:d.offset()[e]-a.offset()[e]+d.outerWidth()+a.s/2+o,height:a.outerHeight()})}}function F(g,f,j){var e=a.x-a.l,d=g.c[f],c=g.c[f+1],h=d.w+e,i=c.w-e;d[b](h+o);c[b](i+o);if(j){d.w=h;c.w=i}}function M(f){if(!a)return;var b=a.t,d=f.pageX-a.L+a.l,i=b.o.minWidth,c=a.i,j=b.o.onDrag,k=b.s*1.5+i+b.b,l=c==b.l-1?b.w-k:b.g[c+1][g]()[e]-b.s-i,n=c?b.g[c-1][g]()[e]+b.s+i:k;d=r.max(n,r.min(l,d));a.x=d;a.css(e,d+o);if(b.o.liveDrag){F(b,c);m(b);if(j){f[s]=b[0];j(f)}}return h}function N(f){G.unbind(w+c).unbind(x+c);d("head :last-child").remove();if(!a)return;var b=a[i](a.t.o.draggingClass).t,e=b.o.onResize;if(a.x){F(b,a.i,1);m(b);if(e){f[s]=b[0];e(f)}}a=n}function Q(p){var o=d(this).data(c),k=f[o.t],i=k.g[o.i],n=0,m;i.L=p.pageX;i.l=i[g]()[e];G.bind(w+c,M).bind(x+c,N);L[l](A+"*{"+t+v+z);i[j](k.o.draggingClass);a=i;if(k.c[o.i].l)for(;n<k.l;n++){m=k.c[n];m.l=h;m.w=m[b]()}return h}function P(){for(a in f){var a=f[a],d=0,e=0;a[i](c);if(a.w!=a[b]()){a.w=a[b]();for(;d<a.l;d++)e+=a.c[d].w;for(d=0;d<a.l;d++)a.c[d].css(b,r.round(1e3*a.c[d].w/e)/10+"%").l=1}m(a[j](c))}}d(window).bind("resize."+c,P);d.fn.extend({colResizable:function(a){var b={draggingClass:"CRD",gripInnerHtml:"",minWidth:15,onDrag:n,onResize:n,liveDrag:h,disable:h},a=d.extend(b,a);return this.each(function(){O(this,a)})}})})(jQuery)